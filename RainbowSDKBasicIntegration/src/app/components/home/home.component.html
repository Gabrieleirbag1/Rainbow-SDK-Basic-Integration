<section>
  <p>Welcome to the Rainbow SDK Integration!</p>
  @if (isConnected) {
    <p><b>You are connected to Rainbow!</b></p>
  } @else {
  <button class="btn btn-primary" (click)="connect()">Connect to Rainbow</button>
  }
</section>

<section *ngIf="isConnected">
  <h2>Your Contacts:</h2>
  <ul>
    <li *ngFor="let contact of contacts">
        <button class="list-btn" (click)="getMessages(contact)">{{ contact.displayName }}</button>
    </li>
  </ul>
</section>

<section *ngIf="messages && messages.length > 0">
  <h2>Messages:</h2>
  <div class="messages-section" #messagesContainer>
    <ul>
      <li *ngFor="let message of messages">
        <p [ngStyle]="{'text-align': message.from.displayName === connectedUser.displayName ? 'right' : 'left'}">
          <b>{{ message.from.displayName }}:</b>
            @if (message.data) {
              <span>{{ message.data }}</span>}
            @else {
              <span><i>Deleted message</i></span>
            }
          </p>
      </li>
    </ul>
  </div>
  <div class="message-input-container">
    <input type="text" class="message-input" [(ngModel)]="newMessage" (keyup.enter)="sendMessage()" placeholder="Type your message here..." />
    <button (click)="sendMessage()">Send</button>
  </div>
</section>